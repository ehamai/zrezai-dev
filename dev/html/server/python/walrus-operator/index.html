<!doctype html><html><head><title>Der Walrus-Operator (Python 3.8)</title><meta charset=utf-8><meta name=X-UA-Compatible content="IE=edge"><meta name=google-site-verification content><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0" name=viewport><meta content="telephone=no" name=format-detection><meta name=description content><meta name=renderer content="webkit"><meta name=theme-color content="#ffffff"><link type=text/css rel=stylesheet href=/vendor/css/bootstrap.min.css><link rel=icon href=https://zrezai-dev.de/img/favicon/favicon.ico><link rel=stylesheet href=https://zrezai-dev.de/scss/journal.min.01b85e0898a781aa780fafeefde8fd126632f5d81889a52aa954a99e5939c759.css integrity="sha256-AbheCJingap4D6/u/ej9EmYy9dgYiaUqqVSpnlk5x1k=" media=screen><link rel=stylesheet href=https://zrezai-dev.de/scss/dark-mode.min.6a0abf23afa30e2c8d048f453f940b7c9a5afae3ed578c66f5169bdf63eb2487.css integrity="sha256-agq/I6+jDiyNBI9FP5QLfJpa+uPtV4xm9Rab32PrJIc=" media=screen><script src=/vendor/js/loadCSS.js></script><script>loadCSS("https://fonts.googleapis.com/css?family=Fira+Mono|Material+Icons");</script><script src=/js/toc.js></script><link rel=stylesheet type=text/css href=css/cookieconsent.min.css></head><body><div id=app><div id=sideContainer class=side-container><a class="a-block nav-head false" href=https://zrezai-dev.de/><div class=nav-title>Zadjad Rezai.</div><div class=nav-subtitle>DevOps.</div></a><div class=nav-link-list><a class="a-block nav-link-item false" href=/freelancing>Freelancing</a>
<a class="a-block nav-link-item false" href=/categories>Kategorien</a>
<a class="a-block nav-link-item false" href=/tags>Tags</a>
<a class="a-block nav-link-item false" href=/posts>Archiv</a>
<a class="a-block nav-link-item false" href=/index.xml>RSS Feed</a>
<a class="a-block nav-link-item false" href=/datenschutz>Datenschutz</a>
<a class="a-block nav-link-item false" href=/impressum>Impressum</a></div><div class=nav-footer>Hugo Theme <a href=https://github.com/amazingrise/hugo-theme-diary>Diary</a> von <a href=https://amazingrise.net>Rise</a> ‚ù§Ô∏è<br>Adaptiert von <a href=https://mak1t0.cc/ target=_blank rel="noreferrer noopener">Makito</a>'s <a href=https://github.com/SumiMakito/hexo-theme-journal/ target=_blank rel="noreferrer noopener">Journal.</a><br><br><div style=font-size:20px><a style=margin:2px href=https://github.com/Xcalizorz target=_blank rel="noreferrer noopener" class="fa fa-github"></a><a style=margin:2px href=https://www.linkedin.com/in/zadjad-rezai/ target=_blank rel="noreferrer noopener" class="fa fa-linkedin"></a><a style=margin:2px href=https://www.xing.com/profile/Zadjad_Rezai/ target=_blank rel="noreferrer noopener" class="fa fa-xing"></a></div>&copy;
2022 Zadjad Rezai.
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css></div></div><div id=extraContainer class=extra-container><div class="toc animated-visibility" :class="{ invisible: scrollY <= 140 }"><div class=toc-content><center>- INHALTE -</center><ul><ul><ul><li><a href=#anwendungsbeispiele onclick="onNavClick(`#anwendungsbeispiele-nav`)" id=anwendungsbeispiele-nav>Anwendungsbeispiele</a></li></ul></div></div><div class=pagination><a id=globalBackToTop class="pagination-action animated-visibility" href=#top :class="{ invisible: scrollY == 0 }"><i class="material-icons pagination-action-icon">keyboard_arrow_up</i></a>
<a type=button class=pagination-action id=darkModeToggleButton><span class="material-icons pagination-action-icon" id=darkModeToggleIcon>dark_mode</span></a></div></div><div class=single-column-drawer-container id=drawer v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }"><div class=drawer-content><div class=drawer-menu><a class="a-block drawer-menu-item false" href=/freelancing>Freelancing</a>
<a class="a-block drawer-menu-item false" href=/categories>Kategorien</a>
<a class="a-block drawer-menu-item false" href=/tags>Tags</a>
<a class="a-block drawer-menu-item false" href=/posts>Archiv</a>
<a class="a-block drawer-menu-item false" href=/index.xml>RSS Feed</a>
<a class="a-block drawer-menu-item false" href=/datenschutz>Datenschutz</a>
<a class="a-block drawer-menu-item false" href=/impressum>Impressum</a><div class=toc><div class=toc-content><center>- INHALTE -</center><ul><ul><ul><li><a href=#anwendungsbeispiele onclick="onNavClick(`#anwendungsbeispiele-nav`)" id=anwendungsbeispiele-nav>Anwendungsbeispiele</a></li></ul></div></div></div></div></div><transition name=fade><div id=drawer-mask v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if=isDrawerOpen v-on:click=toggleDrawer></div></transition><nav id=navBar class="navbar sticky-top navbar-light single-column-nav-container"><div id=navBackground class=nav-background></div><div class="container container-narrow nav-content"><button id=nav_dropdown_btn class=nav-dropdown-toggle type=button v-on:click=toggleDrawer>
<i class=material-icons>menu</i></button>
<a id=navTitle class=navbar-brand href=https://zrezai-dev.de/>Zadjad Rezai.</a>
<button type=button class=nav-darkmode-toggle id=darkModeToggleButton2>
<i class=material-icons id=darkModeToggleIcon2>dark_mode</i></button></div></nav><div class=single-column-header-container id=pageHead v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }"><a href=https://zrezai-dev.de/><div class=single-column-header-title>Zadjad Rezai.</div><div class=single-column-header-subtitle>DevOps.</div></a></div><div id=content><div id=streamContainer class=stream-container><div class="post-list-container post-list-container-shadow"><div class=post><div class=post-head-wrapper style=background-image:url(https://zrezai-dev.de/img/tusk.webp)><div class=post-title>Der Walrus-Operator (Python 3.8)<div class=post-meta><time itemprop=datePublished>29.10.2019 20:56</time>
<i class=material-icons>folder</i>
<a href=/categories/>[PEP Python]</a>
&nbsp;
<i class=material-icons>label</i>
<a href=/tags/pep-572>pep-572</a>
&nbsp;
<a href=/tags/walrus>walrus</a>
&nbsp;
<i class=material-icons>schedule</i>
1 min
47 s.</div></div></div><div class=post-body-wrapper><div class=post-body v-pre><p>Endlich ist er da. Der Walrus-Operator, eingef√ºhrt mit <a href=https://www.python.org/dev/peps/pep-0572/ target=_blank rel="noreferrer noopener" aria-label="(√∂ffnet in neuem Tab)">PEP 572 ‚Äî Assignment Expressions</a>.</p><p>Der Walrus-Operator ist mein pers√∂nliches Highlight, da ich ihn immer gebraucht habe ‚Äì nur vorher wusste ich nicht wie sehr ich ihn gebraucht habe.</p><p>Er bringt eine riesen Erleichterung, macht unseren Code kompakter, lesbarer und nat√ºrlicher sch√∂ner (das Auge liest mit) üò¨</p><p>PEP 572 beschreibt die <a href=https://www.python.org/dev/peps/pep-0572/#id9 target=_blank rel="noreferrer noopener" aria-label="(√∂ffnet in neuem Tab)">Syntax des Walrus-Operators</a> meiner Meinung nach perfekt:</p><blockquote class=wp-block-quote><p>In most contexts where arbitrary Python expressions can be used, a&nbsp;<strong>named expression</strong>&nbsp;can appear. This is of the form&nbsp;NAME := expr&nbsp;where&nbsp;expr&nbsp;is any valid Python expression other than an unparenthesized tuple, and&nbsp;NAME&nbsp;is an identifier.</p><p><br>The value of such a named expression is the same as the incorporated expression, with the additional side-effect that the target is assigned that value:</p><p><cite><a href=https://www.python.org/dev/peps/pep-0572/#id9 target=_blank rel="noreferrer noopener" aria-label="(√∂ffnet in neuem Tab)"><br>‚Äí PEP 572 # Syntax and semantics</a></cite></p></blockquote><h3 id=anwendungsbeispiele>Anwendungsbeispiele</h3><p>Das Beispiel direkt aus dem PEP:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-python data-lang=python><span style=color:#080;font-style:italic># Handle a matched regex</span>
<span style=color:#a2f;font-weight:700>if</span> (match :<span style=color:#666>=</span> pattern<span style=color:#666>.</span>search(data)) <span style=color:#a2f;font-weight:700>is</span> <span style=color:#a2f;font-weight:700>not</span> None:
    <span style=color:#080;font-style:italic># Do something with match</span>

<span style=color:#080;font-style:italic># A loop that can&#39;t be trivially rewritten using 2-arg iter()</span>
<span style=color:#a2f;font-weight:700>while</span> chunk :<span style=color:#666>=</span> <span style=color:#a2f>file</span><span style=color:#666>.</span>read(<span style=color:#666>8192</span>):
   process(chunk)

<span style=color:#080;font-style:italic># Reuse a value that&#39;s expensive to compute</span>
[y :<span style=color:#666>=</span> f(x), y<span style=color:#666>**</span><span style=color:#666>2</span>, y<span style=color:#666>**</span><span style=color:#666>3</span>]

<span style=color:#080;font-style:italic># Share a subexpression between a comprehension filter clause and its output</span>
filtered_data <span style=color:#666>=</span> [y <span style=color:#a2f;font-weight:700>for</span> x <span style=color:#a2f;font-weight:700>in</span> data <span style=color:#a2f;font-weight:700>if</span> (y :<span style=color:#666>=</span> f(x)) <span style=color:#a2f;font-weight:700>is</span> <span style=color:#a2f;font-weight:700>not</span> None]
</code></pre></div><p>Ein sch√∂nes Beispiel von <a rel="noreferrer noopener" aria-label="(√∂ffnet in neuem Tab)" href=https://twitter.com/VictorStinner/status/1014988580282912770 target=_blank>Victor Stinner</a> (leicht angepasst):</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-python data-lang=python><span style=color:#666>&gt;</span><span style=color:#080;font-style:italic># Without Walrus-Operator</span>

<span style=color:#a2f;font-weight:700>while</span> True:
    line <span style=color:#666>=</span> fp<span style=color:#666>.</span>readline()
    <span style=color:#a2f;font-weight:700>if</span> <span style=color:#a2f;font-weight:700>not</span> line:
        <span style=color:#a2f;font-weight:700>break</span>
    match <span style=color:#666>=</span> pattern<span style=color:#666>.</span>search(line)

    <span style=color:#a2f;font-weight:700>if</span> match:
        do_something_with_match(match)
    <span style=color:#a2f;font-weight:700>else</span>:
        match <span style=color:#666>=</span> other_pattern<span style=color:#666>.</span>search(line)
        <span style=color:#a2f;font-weight:700>if</span> match:
            do_something_with_match(match)
</code></pre></div><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-python data-lang=python><span style=color:#080;font-style:italic># With Walrus-Operator</span>

<span style=color:#a2f;font-weight:700>while</span> (line :<span style=color:#666>=</span> fp<span style=color:#666>.</span>readline()):
    <span style=color:#a2f;font-weight:700>if</span> (match :<span style=color:#666>=</span> pattern<span style=color:#666>.</span>search(line)):
        do_something_with_match(match)
    <span style=color:#a2f;font-weight:700>elif</span> (match :<span style=color:#666>=</span> other_pattern<span style=color:#666>.</span>search(line)):
        do_something_with_match(match)
</code></pre></div><p>Aufwendige Berechnungen in <a href=https://www.python.org/dev/peps/pep-0202/ target=_blank rel="noreferrer noopener" aria-label="List Comprehensions  (√∂ffnet in neuem Tab)">List Comprehensions </a>nicht wiederholen:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-python data-lang=python><span style=color:#080;font-style:italic># Without Walrus-Operator</span>

filtered_data <span style=color:#666>=</span> [
  complex_func(x) <span style=color:#a2f;font-weight:700>for</span> x <span style=color:#a2f;font-weight:700>in</span> data
  <span style=color:#a2f;font-weight:700>if</span> complex_func(x) <span style=color:#a2f;font-weight:700>is</span> <span style=color:#a2f;font-weight:700>not</span> None
]

<span style=color:#080;font-style:italic># With Walrus-Operator</span>

filtered_data <span style=color:#666>=</span> [
  y <span style=color:#a2f;font-weight:700>for</span> x <span style=color:#a2f;font-weight:700>in</span> data
  <span style=color:#a2f;font-weight:700>if</span> (y :<span style=color:#666>=</span> complex_func(x)) <span style=color:#a2f;font-weight:700>is</span> <span style=color:#a2f;font-weight:700>not</span> None
]
</code></pre></div><p>Daten einer API erhalten:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-python data-lang=python><span style=color:#080;font-style:italic># Without Walrus-Operator</span>

<span style=color:#a2f;font-weight:700>import</span> <span style=color:#00f;font-weight:700>requests</span>

book_information <span style=color:#666>=</span> requests<span style=color:#666>.</span>get(
    <span style=color:#b44>&#34;https://openlibrary.org/api/books?bibkeys=ISBN:0201558025,LCCN:93005405&amp;format=json&#34;</span>
)

<span style=color:#a2f;font-weight:700>for</span> book_id <span style=color:#a2f;font-weight:700>in</span> book_information<span style=color:#666>.</span>json():
    thumbnail_url <span style=color:#666>=</span> book_id[<span style=color:#b44>&#39;thumbnail_url&#39;</span>]
    <span style=color:#a2f;font-weight:700>if</span> thumbnail_url:
        <span style=color:#a2f;font-weight:700>print</span>(f<span style=color:#b44>&#39;Here is the thumbnail: {thumbnail_url}&#39;</span>)
</code></pre></div><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-python data-lang=python><span style=color:#080;font-style:italic># With Walrus-Operator</span>

<span style=color:#a2f;font-weight:700>import</span> <span style=color:#00f;font-weight:700>requests</span>

book_information <span style=color:#666>=</span> requests<span style=color:#666>.</span>get(
    <span style=color:#b44>&#34;https://openlibrary.org/api/books?bibkeys=ISBN:0201558025,LCCN:93005405&amp;format=json&#34;</span>
)

<span style=color:#a2f;font-weight:700>for</span> book_id <span style=color:#a2f;font-weight:700>in</span> book_information<span style=color:#666>.</span>json():
    <span style=color:#a2f;font-weight:700>if</span> (thumbnail_url :<span style=color:#666>=</span> book_id[<span style=color:#b44>&#39;thumbnail_url&#39;</span>]):
        <span style=color:#a2f;font-weight:700>print</span>(f<span style=color:#b44>&#39;Here is the thumbnail: {thumbnail_url}&#39;</span>)
</code></pre></div><hr width=100% id=EOF><p style=color:#777>Zuletzt bearbeitet am 29.10.2019</p></div></div><nav class=post-pagination><a class=newer-posts href=https://zrezai-dev.de/methodik/qualitatives-pair-programming/>N√§chste<br>Pair Programming als Qualit√§tssicherungsma√ünahme</a>
<a class=older-posts href=https://zrezai-dev.de/python/pep/pep-8-design/>Vorherige<br>PEP 8 ‚Äì Design f√ºr Vererbung</a></nav><div class=post-comment-wrapper></div></div></div></div></div><div id=single-column-footer>Hugo Theme <a href=https://github.com/amazingrise/hugo-theme-diary>Diary</a> von <a href=https://amazingrise.net>Rise</a> ‚ù§Ô∏è<br>Adaptiert von <a href=https://mak1t0.cc/ target=_blank rel="noreferrer noopener">Makito</a>'s <a href=https://github.com/SumiMakito/hexo-theme-journal/ target=_blank rel="noreferrer noopener">Journal.</a><br><br><div style=font-size:20px><a style=margin:2px href=https://github.com/Xcalizorz target=_blank rel="noreferrer noopener" class="fa fa-github"></a><a style=margin:2px href=https://www.linkedin.com/in/zadjad-rezai/ target=_blank rel="noreferrer noopener" class="fa fa-linkedin"></a><a style=margin:2px href=https://www.xing.com/profile/Zadjad_Rezai/ target=_blank rel="noreferrer noopener" class="fa fa-xing"></a></div>&copy;
2022 Zadjad Rezai.
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css></div></div><script src=js/cookieconsent.min.js></script><script>window.cookieconsent.initialise({"palette":{"popup":{"background":"#237afc"},"button":{"background":"transparent","text":"#fff","border":"#fff"}},"content":{"message":"Diese Website verwendet Cookies, um Ihnen eine bestm√∂gliche Nutzung zu gew√§hrleisten.","dismiss":"Verstanden","link":"Weitere Informationen","href":"https://zrezai-dev.de/datenschutz/"}});</script><script src=/js/journal.js></script></body></html>